
INSERT INTO distributed.building_view VALUES ('00000000-0000-0000-0000-000000000001', 'Locaux', 'Adresse', 'EU');

INSERT INTO distributed.gategroup_view
VALUES
    ('00000000-0000-0000-0000-000000000001', 'Locaux', '00000000-0000-0000-0000-000000000001'),
    ('00000000-0000-0000-0000-000000000002', 'Archives', '00000000-0000-0000-0000-000000000001'),
    ('00000000-0000-0000-0000-000000000003', 'Salle serveurs', '00000000-0000-0000-0000-000000000001');

-- Gate 1 : Entrée dans locaux
-- Gate 2 : Entrée dans archives
-- Gate 3 : sortie des archives
-- Gate 4 : Entrée dans salle serveurs
-- Gate 5 : Sortie de la salle serveurs et des locaux
-- Gate 6 : Sortie des locaux
INSERT INTO distributed.gatetogategroup_view
VALUES
    ('00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', true),
    ('00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000002', true),
    ('00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000002', false),
    ('00000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000003', true),
    ('00000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000001', false),
    ('00000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000003', false),
    ('00000000-0000-0000-0000-000000000006', '00000000-0000-0000-0000-000000000001', false);

INSERT INTO distributed.person_view
VALUES
    ('00000000-0000-0000-0000-000000000001', 'EU'), -- Employé DSI
    ('00000000-0000-0000-0000-000000000002', 'EU'), -- Comptable
    ('00000000-0000-0000-0000-000000000003', 'EU'); -- Visiteur

INSERT INTO distributed.accessright_view(badgeid, gategroupid, expirationdate)
VALUES
    ('00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '2024-12-31'),
    ('00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000003', '2024-12-31'),
    ('00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', '2024-12-31'),
    ('00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000002', '2024-12-31'),
    ('00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001', '2024-12-31');

DELETE FROM distributed.accesslog_view WHERE badgeid = '00000000-0000-0000-0000-000000000001';
DELETE FROM distributed.presencelog_view WHERE badgeid = '00000000-0000-0000-0000-000000000001';

SELECT distributed.enter_workspace('00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001');
SELECT distributed.enter_workspace('00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000002');
SELECT distributed.enter_workspace('00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000004');
SELECT distributed.enter_workspace('00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000005');

SELECT accesslogid, gateid, accesstime, success FROM distributed.accesslog_view WHERE badgeid = '00000000-0000-0000-0000-000000000001';

SELECT presencelogid, gategroupid, elapsedtime FROM distributed.presencelog_view WHERE badgeid = '00000000-0000-0000-0000-000000000001';

